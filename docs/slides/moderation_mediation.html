<!DOCTYPE html>
<html lang="en"><head>
<script src="moderation_mediation_files/libs/clipboard/clipboard.min.js"></script>
<script src="moderation_mediation_files/libs/quarto-html/tabby.min.js"></script>
<script src="moderation_mediation_files/libs/quarto-html/popper.min.js"></script>
<script src="moderation_mediation_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="moderation_mediation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="moderation_mediation_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="moderation_mediation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.269">

  <meta name="author" content="Dr Christopher Wilson">
  <title>Moderation and Mediation in R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="moderation_mediation_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="moderation_mediation_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="moderation_mediation_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="custom.css">
  <link href="moderation_mediation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="moderation_mediation_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="moderation_mediation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="moderation_mediation_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="moderation_mediation_files/libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
  <script src="moderation_mediation_files/libs/viz-1.8.2/viz.js"></script>
  <link href="moderation_mediation_files/libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
  <script src="moderation_mediation_files/libs/grViz-binding-1.0.9/grViz.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Moderation and Mediation in R</h1>
  <p class="subtitle">Advanced Psychological Research Methods</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr Christopher Wilson 
</div>
</div>
</div>

</section>
<section class="slide level2">

<div class="cell" data-layout-align="center">

</div>
</section>
<section id="questions" class="slide level2">
<h2>Questions?</h2>
<iframe src="https://wall.sli.do/event/u3jTwQP6TdcYodD7qZBEnD" height="100%" width="100%" frameborder="0" style="min-height: 560px;" title="Slido">
</iframe>
</section>
<section id="submit-your-attendance" class="slide level2">
<h2>Submit your attendance</h2>
<h3 id="attendance-code-5910">Attendance code: 5910</h3>

<img data-src="img/attendanceQR.png" width="400" class="r-stretch quarto-figure-center"><h3 id="httpbit.lyaprm22"><a href="http://bit.ly/APRM22" class="uri">http://bit.ly/APRM22</a></h3>
</section>
<section>
<section id="moderation-analysis" class="title-slide slide level1 center">
<h1>Moderation analysis</h1>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ul>
<li>What are mediation and moderation?</li>
<li>Moderation analysis in more detail</li>
<li>Grand Mean Centering</li>
<li>Checking Assumptions</li>
<li>Interpreting Moderation</li>
<li>Bootstrapping Moderation</li>
</ul>
</section></section>
<section>
<section id="what-are-moderation-and-mediation" class="title-slide slide level1 center">
<h1>What are moderation and mediation?</h1>

</section>
<section id="what-is-moderation" class="slide level2">
<h2>What is moderation?</h2>
<p>There is a direct relationship between X and Y but it is affected by a moderator (M)</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-07d554c5f20bb7bade9c" style="width:960px;height:75%;"></div>
<script type="application/json" data-for="htmlwidget-07d554c5f20bb7bade9c">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,2!\"] \n  \"3\" [label = \"\", shape = \"point\", width = \"0\", height = \"0\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,1!\"] \n  \"4\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"4\" [color = \"black\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"black\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In the above model, we theorise that the Treatment has a direct relationship with Recovery and the nature of that relationship can be affected by the level of Engagement from the clinician.</p>
</section>
<section id="what-is-mediation" class="slide level2">
<h2>What is mediation?</h2>
<p>Where the relationship between a predictor (X) and an outcome (Y) is mediated by another variable (M).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9ee8a5b519b7e3a02e8a" style="width:960px;height:75%;"></div>
<script type="application/json" data-for="htmlwidget-9ee8a5b519b7e3a02e8a">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"Clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,3!\"] \n  \"3\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"2\" [color = \"blue\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"green\", fontsize = \"16\"] \n\"1\"->\"3\" [color = \"red\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In the above model, we theorise that the relationship between Treatment and Recovery is indirect. That is, Recovery happens via Engagement from the clinician, not independently of it.</p>
</section>
<section id="why-different-models" class="slide level2">
<h2>Why different models?</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d21011630f1a099b11d9" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d21011630f1a099b11d9">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"Clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,3!\"] \n  \"3\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"2\" [color = \"blue\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"green\", fontsize = \"16\"] \n\"1\"->\"3\" [color = \"red\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In this model, we are saying that to understand the relationship between Treatment and Recovery, we need to include Clinician Engagement, because that is what has the direct relationship with Recovery.</p>
</section>
<section id="why-different-models-1" class="slide level2">
<h2>Why different models?</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8e4abbe8a0381d2dd798" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-8e4abbe8a0381d2dd798">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,2!\"] \n  \"3\" [label = \"\", shape = \"point\", width = \"0\", height = \"0\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,1!\"] \n  \"4\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"4\" [color = \"black\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"black\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>In this model, we are saying that the variance in recovery can be explained by treatment, but the level of clinician engagement affects the strength or direction of the relationship (i.e.&nbsp;can weaken/strengthen it, change its direction).</p>
</section></section>
<section>
<section id="moderation" class="title-slide slide level1 center">
<h1>Moderation</h1>

</section>
<section id="what-packages-do-we-need" class="slide level2">
<h2>What packages do we need?</h2>
<ul>
<li><strong>gvlma</strong> (for checking assumptions)</li>
<li><strong>interactions</strong> (for generating interaction plot)</li>
<li><strong>Rockchalk</strong> (for testing simple slopes)</li>
<li><strong>car</strong> (includes a <strong>Boot()</strong> function to bootstrap regression models )</li>
</ul>
</section>
<section id="what-is-moderation-1" class="slide level2">
<h2>What is moderation?</h2>
<ul>
<li>The relationship between a predictor (X) and outcome (Y) is affected by another variable (M)</li>
<li>This is referred to as an interaction (similar to interaction in standard regression)</li>
<li>A moderator can effect the direction and/or strength of a relationship between X and Y</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-2db564ccc9d909e7f3e2" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-2db564ccc9d909e7f3e2">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,2!\"] \n  \"3\" [label = \"\", shape = \"point\", width = \"0\", height = \"0\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,1!\"] \n  \"4\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"4\" [color = \"black\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"black\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Here we might find that the relationship between Time in Treatment and General Wellbeing is strong for those who have a strong engagement with their Treatment psychologist and weak for those who do not have good engagement with their Treatment psychologist.</p>
</section>
<section id="what-is-moderation-2" class="slide level2">
<h2>What is moderation? #2</h2>
<ul>
<li><p>Very similar to multiple regression</p>
<p>lm(Y ~ X + M + X*M)</p></li>
<li><p>Moderation analysis includes X, M and the interaction between X and M</p></li>
<li><p>If we find a moderation effect it becomes the focus of our analysis (the independent role of X and M becomes less important)</p></li>
</ul>
</section>
<section id="what-is-moderation-3" class="slide level2">
<h2>What is moderation? #3</h2>

<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-8-1.png" style="width:60.0%" class="r-stretch quarto-figure-center"><p>In the plot above:</p>
<ul>
<li>The blue line is the “standard” regression line</li>
<li>The black line is when the moderator is “low” (-1sd)</li>
<li>The dotted line is when the moderator is “high” (+1sd)</li>
</ul>
</section></section>
<section>
<section id="moderation-step-by-step" class="title-slide slide level1 center">
<h1>Moderation: step-by-step</h1>

</section>
<section id="step-1-grand-mean-centering" class="slide level2">
<h2>Step 1: Grand Mean Centering</h2>
<ul>
<li><p>Regression coefficients (b values) are based on predicting Y when X = 0</p></li>
<li><p>Not all measures actually have a zero value</p></li>
<li><p>To make results easier to interpret, we can centre our data around the grand mean of the data (making the mean 0)</p>
<ul>
<li>The mean of the full sample is subtracted from the value</li>
</ul></li>
<li><p>This is similar to z-score (i.e.&nbsp;a standardised score)</p></li>
</ul>
<p>To do this in R, we can use the <strong>scale()</strong> function:</p>
<pre><code>Xc    &lt;- scale(X, center=TRUE, scale=FALSE) #Centering X; 
Mc    &lt;- scale(M,  center=TRUE, scale=FALSE) #Centering M;</code></pre>
<p>We then use the centred data in our analysis</p>
</section>
<section id="step-1-grand-mean-centering-2" class="slide level2">
<h2>Step 1: Grand Mean Centering #2</h2>
<h3 id="we-can-see-that-the-difference-between-the-original-data-is-the-mean-of-the-data.">We can see that the difference between the original data is the mean of the data.</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">#Centering Data</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>Moddata<span class="sc">$</span>timeInTreatment_centred    <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">scale</span>(timeInTreatment, <span class="at">center=</span><span class="cn">TRUE</span>, <span class="at">scale=</span><span class="cn">FALSE</span>)) </span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#Centering IV; </span></span>
<span id="cb2-5"><a href="#cb2-5"></a>Moddata<span class="sc">$</span>engagementLevel_centred    <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">scale</span>(engagementLevel,  <span class="at">center=</span><span class="cn">TRUE</span>, <span class="at">scale=</span><span class="cn">FALSE</span>)) <span class="co">#Centering moderator; </span></span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#Moderation "By Hand" with centred data</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">library</span>(gvlma)</span>
<span id="cb2-9"><a href="#cb2-9"></a>fitMod <span class="ot">&lt;-</span> <span class="fu">lm</span>(recoveryLevel <span class="sc">~</span> timeInTreatment_centred <span class="sc">*</span>engagementLevel_centred  , <span class="at">data =</span> Moddata) <span class="co">#Model interacts IV &amp; moderator</span></span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">library</span>(interactions)</span>
<span id="cb2-12"><a href="#cb2-12"></a> ip <span class="ot">&lt;-</span> <span class="fu">interact_plot</span>(fitMod, <span class="at">pred =</span> timeInTreatment_centred, <span class="at">modx =</span> engagementLevel_centred)</span>
<span id="cb2-13"><a href="#cb2-13"></a> ip</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="do-i-need-to-mean-centre-my-data" class="slide level2">
<h2>Do I need to mean centre my data?</h2>
<p>It is worth noting:</p>
<ul>
<li>It does not change the results of your interaction (coefficient, standard error or significance tests).</li>
<li>It will change the results of the direct effects (the individual predictors in your model).</li>
<li>It is a step that tries to ensure that the coefficients of the predictor and moderator are meaningful in relation to each other.</li>
<li>In some cases, it might not be necessary to mean centre at all. However, there is no harm in doing so, and it could potentially be helpful.</li>
</ul>
<p>Hayes (2013) discusses mean centering, pp.&nbsp;282-290.</p>
<p>McClelland, G. H., Irwin, J. R., Disatnik, D., &amp; Sivan, L. (2017). Multicollinearity is a red herring in the search for moderator variables: A guide to interpreting moderated multiple regression models and a critique of Iacobucci, Schneider, Popovich, and Bakamitsos (2016). Behavior research methods, 49(1), 394-402.</p>
</section>
<section id="step-2-check-assumptions" class="slide level2">
<h2>Step 2: Check assumptions</h2>
<h3 id="we-can-use-the-gvlma-function-to-check-regression-assumptions">We can use the gvlma function to check regression assumptions</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryLevel ~ timeInTreatment_centred * engagementLevel_centred, 
    data = Moddata)

Coefficients:
                                    (Intercept)  
                                        21.1851  
                        timeInTreatment_centred  
                                         0.8971  
                        engagementLevel_centred  
                                         0.5842  
timeInTreatment_centred:engagementLevel_centred  
                                         0.1495  


ASSESSMENT OF THE LINEAR MODEL ASSUMPTIONS
USING THE GLOBAL TEST ON 4 DEGREES-OF-FREEDOM:
Level of Significance =  0.05 

Call:
 gvlma(x = fitMod) 

                    Value p-value                   Decision
Global Stat        9.6949 0.04589 Assumptions NOT satisfied!
Skewness           7.7571 0.00535 Assumptions NOT satisfied!
Kurtosis           1.2182 0.26972    Assumptions acceptable.
Link Function      0.5287 0.46716    Assumptions acceptable.
Heteroscedasticity 0.1910 0.66207    Assumptions acceptable.</code></pre>
</div>
</div>
<p>The “global stat” is an attempt to check multiple assumptions of linear model (Pena &amp; Slate, 2006).</p>
<p>Since one of the underlying assumptions is violated, the overall stat is also not acceptable.</p>
<p>The data looks skewed, we should transform it or perhaps use bootstrapping</p>
</section>
<section id="step-3-moderation-analysis" class="slide level2">
<h2>Step 3: Moderation Analysis</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryLevel ~ timeInTreatment_centred * engagementLevel_centred, 
    data = Moddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-18.121  -8.938  -0.670   5.840  37.396 

Coefficients:
                                                Estimate Std. Error t value
(Intercept)                                     21.18508    1.14115  18.565
timeInTreatment_centred                          0.89707    0.33927   2.644
engagementLevel_centred                          0.58416    0.15117   3.864
timeInTreatment_centred:engagementLevel_centred  0.14948    0.04022   3.716
                                                Pr(&gt;|t|)    
(Intercept)                                      &lt; 2e-16 ***
timeInTreatment_centred                         0.009569 ** 
engagementLevel_centred                         0.000203 ***
timeInTreatment_centred:engagementLevel_centred 0.000340 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 11.33 on 96 degrees of freedom
Multiple R-squared:  0.2737,    Adjusted R-squared:  0.251 
F-statistic: 12.06 on 3 and 96 DF,  p-value: 9.12e-07</code></pre>
</div>
</div>
<p>The results above show that there is a moderated effect</p>
</section>
<section id="step-3-moderation-analysis-2" class="slide level2">
<h2>Step 3: Moderation analysis #2</h2>
<p>We use an approach called <strong>simple slopes</strong> to visualise the moderation effect</p>
<pre><code>    interact_plot(fitMod, pred = timeInTreatment_centred, modx = engagementLevel_centred)</code></pre>

<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-12-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="step-3-moderation-analysis-3" class="slide level2">
<h2>Step 3: Moderation analysis #3</h2>
<p>The <strong>rockchalk</strong> package includes useful functions for visualising simple slopes</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = recoveryLevel ~ timeInTreatment * engagementLevel, 
    data = Moddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-18.121  -8.938  -0.670   5.840  37.396 

Coefficients:
                                Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                     17.28006    3.17944   5.435 4.15e-07 ***
timeInTreatment                  0.15510    0.42033   0.369  0.71296    
engagementLevel                 -0.38484    0.29916  -1.286  0.20140    
timeInTreatment:engagementLevel  0.14948    0.04022   3.716  0.00034 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 11.33 on 96 degrees of freedom
Multiple R-squared:  0.2737,    Adjusted R-squared:  0.251 
F-statistic: 12.06 on 3 and 96 DF,  p-value: 9.12e-07</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-13-1.png" width="960"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Values of engagementLevel OUTSIDE this interval:
        lo         hi 
-11.580166   3.634439 
cause the slope of (b1 + b2*engagementLevel)timeInTreatment to be statistically significant</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-13-2.png" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-is-bootstrapping" class="slide level2">
<h2>What is bootstrapping?</h2>
<blockquote>
<blockquote>
<p>“Bootstrapping is a nonparametric approach to effect-size estimation and hypothesis testing that makes no assumptions about the shape of the distributions of the variables or the sampling distribution of the statistic” (Preacher &amp; Hayes, 2004, p.&nbsp;722)</p>
</blockquote>
</blockquote>
<ul>
<li><p>Bootstrapping takes a large number of samples from our data and runs the analysis on each of these samples</p></li>
<li><p>The sampling is done randomly with replacement, and each sample in the bootstrap is the same size as our dataset</p></li>
<li><p>Using this method, we can create estimates with that fall within a narrower confidence interval (since we have now run the analysis on 100’s of samples)</p></li>
<li><p>Bootstrapping overcomes concerns about the distribution of our original dataset</p></li>
</ul>
</section>
<section id="step-4-bootstrapping" class="slide level2">
<h2>Step 4: Bootstrapping</h2>
<h3 id="the-car-package-includes-a-function-to-bootstrap-regression">The <strong>car</strong> package includes a function to bootstrap regression</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>                                      2.5 %     97.5 %
(Intercept)                     10.96891826 23.5912086
timeInTreatment                 -0.67926290  0.9894532
engagementLevel                 -0.97866229  0.2089882
timeInTreatment:engagementLevel  0.06963667  0.2293205</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Bootstrap bca confidence intervals

                                      2.5 %     97.5 %
(Intercept)                     11.57230420 23.7222700
timeInTreatment                 -0.61780918  1.0397199
engagementLevel                 -0.90786799  0.2558502
timeInTreatment:engagementLevel  0.05806412  0.2146814</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Number of bootstrap replications R = 999 
                                original    bootBias   bootSE  bootMed
(Intercept)                     17.28006 -0.13667103 3.165301 17.05431
timeInTreatment                  0.15510  0.01637117 0.399550  0.15929
engagementLevel                 -0.38484  0.00716631 0.294061 -0.38218
timeInTreatment:engagementLevel  0.14948 -0.00052838 0.038516  0.14974</code></pre>
</div>

</div>
<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="how-do-we-use-this-information" class="slide level2">
<h2>How do we use this information?</h2>
<ul>
<li><p>If this bias is large, there could be bias in the estimates from your sample data</p></li>
<li><p>However, you should not correct based on one bias estimate, as it could be an over-correction</p></li>
<li><p>“It provides information to you that your estimate contains bias (or not) and this information can influence your decision making based on the estimate” (Zivot, 2021, Chapter 8.6).</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Number of bootstrap replications R = 999 
                                original    bootBias   bootSE  bootMed
(Intercept)                     17.28006 -0.13667103 3.165301 17.05431
timeInTreatment                  0.15510  0.01637117 0.399550  0.15929
engagementLevel                 -0.38484  0.00716631 0.294061 -0.38218
timeInTreatment:engagementLevel  0.14948 -0.00052838 0.038516  0.14974</code></pre>
</div>
</div>
</section></section>
<section>
<section id="mediation-analysis" class="title-slide slide level1 center">
<h1>Mediation analysis</h1>

</section>
<section id="what-is-a-mediation-design" class="slide level2">
<h2>What is a mediation design?</h2>
<p>Whether a mediation analysis is appropriate is determined as much by the design as by statistical criteria.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-6be5fc74dd50741f787e" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-6be5fc74dd50741f787e">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"Clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,3!\"] \n  \"3\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"2\" [color = \"blue\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"green\", fontsize = \"16\"] \n\"1\"->\"3\" [color = \"red\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>We must consider whether it makes sense to predict this relationship between variables</p>
</section>
<section id="what-is-mediation-analysis" class="slide level2">
<h2>What is mediation analysis?</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9377832dac485c47eb61" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-9377832dac485c47eb61">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \" \",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Treatment\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"Clinician Engagement\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,3!\"] \n  \"3\" [label = \"Client Recovery\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"2\" [color = \"blue\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"green\", fontsize = \"16\"] \n\"1\"->\"3\" [color = \"red\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li>Based on regression</li>
</ul>
<p>A summary of the logic of mediation:</p>
<ul>
<li>The direct relationship between X and Y should be significant</li>
<li>The relationship between X and M should be significant</li>
<li>The relationship between M and Y (controlling for X) should be significant</li>
<li>When controlling for M, the strength of the relationship between X and Y decreases and is <strong>not</strong> significant</li>
</ul>
</section>
<section id="what-is-mediation-analysis-2" class="slide level2">
<h2>What is mediation analysis /#2?</h2>
<ul>
<li>The direct relationship between X and Y should be significant</li>
<li><span style="color: blue;"> The relationship between X and M should be significant </span></li>
<li><span style="color: green;"> The relationship between M and Y (controlling for X) should be significant </span></li>
<li><span style="color: red;"> When controlling for M, the strength of the relationship between X and Y decreases and is <strong>not</strong> significant </span></li>
</ul>
<blockquote>
<p>Baron &amp; Kenny (1986) originally used a 4-step regression model to test each of these relationships.</p>
</blockquote>
</section>
<section id="what-packages-do-we-need-1" class="slide level2">
<h2>What packages do we need?</h2>
<pre><code>library(mediation) #Mediation package
library(multilevel) #Sobel Test
library(bda) #Another Sobel Test option
library(gvlma) #Testing Model Assumptions 
library(stargazer) #Handy regression tables</code></pre>
</section></section>
<section>
<section id="mediation-analysis-the-baron-and-kenny-approach" class="title-slide slide level1 center">
<h1>Mediation analysis (the Baron and Kenny Approach)</h1>

</section>
<section id="conducting-mediation-analysis-the-baron-and-kenny-approach" class="slide level2">
<h2>Conducting mediation analysis (the Baron and Kenny Approach)</h2>
<ul>
<li>Baron &amp; Kenny (1986) originally used a 4-step regression model to test each of these relationships.</li>
<li>The sobel test is then used to test the significance of mediation</li>
</ul>
<div class="cell" data-layout-align="center">

</div>
</section>
<section id="step-1-total-effect" class="slide level2">
<h2>Step 1: Total Effect</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ X, data = Meddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-10.917  -3.738  -0.259   2.910  12.540 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept) 19.88368   14.26371   1.394   0.1665  
X            0.16899    0.08116   2.082   0.0399 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.16 on 98 degrees of freedom
Multiple R-squared:  0.04237,   Adjusted R-squared:  0.0326 
F-statistic: 4.336 on 1 and 98 DF,  p-value: 0.03993</code></pre>
</div>
</div>
</section>
<section id="step-2" class="slide level2">
<h2>Step 2:</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = M ~ X, data = Meddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.5367 -3.4175 -0.4375  2.9032 16.4520 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  6.04494   13.41692   0.451    0.653    
X            0.66252    0.07634   8.678 8.87e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.854 on 98 degrees of freedom
Multiple R-squared:  0.4346,    Adjusted R-squared:  0.4288 
F-statistic: 75.31 on 1 and 98 DF,  p-value: 8.872e-14</code></pre>
</div>
</div>
</section>
<section id="step-3" class="slide level2">
<h2>Step 3:</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ M + X, data = Meddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.3651 -3.3037 -0.6222  3.1068 10.3991 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 17.32177   13.16216   1.316    0.191    
M            0.42381    0.09899   4.281 4.37e-05 ***
X           -0.11179    0.09949  -1.124    0.264    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.756 on 97 degrees of freedom
Multiple R-squared:  0.1946,    Adjusted R-squared:  0.1779 
F-statistic: 11.72 on 2 and 97 DF,  p-value: 2.771e-05</code></pre>
</div>
</div>
</section>
<section id="step-4" class="slide level2">
<h2>Step 4:</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = X ~ Y + M, data = Meddata)

Residuals:
    Min      1Q  Median      3Q     Max 
-14.438  -2.573  -0.030   3.010  11.779 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 96.11234    9.27663  10.361  &lt; 2e-16 ***
Y           -0.11493    0.10229  -1.124    0.264    
M            0.69619    0.08356   8.332 5.27e-13 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.823 on 97 degrees of freedom
Multiple R-squared:  0.4418,    Adjusted R-squared:  0.4303 
F-statistic: 38.39 on 2 and 97 DF,  p-value: 5.233e-13</code></pre>
</div>
</div>
</section>
<section id="viewing-output" class="slide level2">
<h2>Viewing output</h2>
<pre><code>Summary Table
stargazer(fit, fita, fitb, fitc, type = "text", title = "Baron and Kenny Method")</code></pre>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/baronandkenny.png" width="2000" height="700"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interpreting-baron-and-kenny-approach" class="slide level2">
<h2>Interpreting Baron and Kenny approach</h2>
<p>A reminder of the logic of mediation:</p>
<ul>
<li>The direct relationship between X and Y should be significant</li>
<li>The relationship between X and M should be significant</li>
<li>The relationship between M and Y (controlling for X) should be significant</li>
<li>When controlling for M, the strength of the relationship between X and Y decreases and is <strong>not</strong> significant</li>
</ul>
</section>
<section id="running-the-sobel-test" class="slide level2">
<h2>Running the Sobel test</h2>
<ul>
<li>The Sobel test checks the significance of indirect effects</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>$`Mod1: Y~X`
              Estimate Std. Error  t value   Pr(&gt;|t|)
(Intercept) 19.8836805 14.2637142 1.394004 0.16646905
pred         0.1689931  0.0811601 2.082220 0.03992761

$`Mod2: Y~X+M`
              Estimate  Std. Error   t value     Pr(&gt;|t|)
(Intercept) 17.3217682 13.16215851  1.316028 1.912663e-01
pred        -0.1117904  0.09949262 -1.123605 2.639537e-01
med          0.4238113  0.09899469  4.281152 4.371472e-05

$`Mod3: M~X`
             Estimate  Std. Error   t value     Pr(&gt;|t|)
(Intercept) 6.0449365 13.41692114 0.4505457 6.533122e-01
pred        0.6625203  0.07634187 8.6783345 8.871741e-14

$Indirect.Effect
[1] 0.2807836

$SE
[1] 0.07313234

$z.value
[1] 3.83939

$N
[1] 100</code></pre>
</div>
</div>
</section></section>
<section>
<section id="mediation-analysis-the-mediation-package" class="title-slide slide level1 center">
<h1>Mediation analysis (the Mediation package)</h1>

</section>
<section id="preacher-hayes-2004-mediation-approach" class="slide level2">
<h2>Preacher &amp; Hayes (2004) mediation approach</h2>
<ul>
<li>Mediation package in R uses the Preacher &amp; Hayes (2004) bootstrapping approach</li>
<li>They argue that few people test the signficance of the indirect effect</li>
</ul>
<blockquote>
<blockquote>
<p>“Baron and Kenny simply state that perfect mediation has occurred if c’ becomes nonsignificant after controlling for M, so researchers have focused on that requirement.” (Preacer &amp; Hayes, 2004, p.&nbsp;719)</p>
</blockquote>
</blockquote>
<ul>
<li>Sobel test has low power (requires larger sample sizes)</li>
<li>Sobel test assumes normality (often violated)</li>
</ul>
</section>
<section id="mediation-example" class="slide level2">
<h2>Mediation example</h2>
<p>Is the relationship between <em>No of hours awake</em> and <em>wakefulness</em> mediated by <em>caffiene consumption</em>?</p>
<blockquote>
<p>This example is from Demos &amp; Salas (2019). <em>A Language, not a Letter: Learning Statistics in R</em> (Chapter 14)</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="grViz html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-927f18e1ac8739fcd87b" style="width:960px;height:75%;"></div>
<script type="application/json" data-for="htmlwidget-927f18e1ac8739fcd87b">{"x":{"diagram":"digraph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \"\",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"# Hours Awake\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"1,1!\"] \n  \"2\" [label = \"Caffiene \n consumption\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"3,3!\"] \n  \"3\" [label = \"Wakefulness\", shape = \"rectangle\", width = \"1.5\", height = \"1\", fontsize = \"12\", color = \"black\", fontcolor = \"black\", fillcolor = \"#FFFFFF\", pos = \"5,1!\"] \n\"1\"->\"2\" [color = \"blue\", fontsize = \"16\"] \n\"2\"->\"3\" [color = \"green\", fontsize = \"16\"] \n\"1\"->\"3\" [color = \"red\", fontsize = \"16\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="step-1-run-the-models" class="slide level2">
<h2>Step 1: Run the models</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">#Mediate package</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">library</span>(mediation)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a>fitM <span class="ot">&lt;-</span> <span class="fu">lm</span>(M <span class="sc">~</span> X,     <span class="at">data=</span>Meddata) <span class="co">#IV on M; Hours since waking predicting coffee consumption</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>fitY <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X <span class="sc">+</span> M, <span class="at">data=</span>Meddata) <span class="co">#IV and M on DV; Hours since dawn and coffee predicting wakefulness</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-check-assumptions-1" class="slide level2">
<h2>Step 2: Check assumptions</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">gvlma</span>(fitM) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = M ~ X, data = Meddata)

Coefficients:
(Intercept)            X  
     6.0449       0.6625  


ASSESSMENT OF THE LINEAR MODEL ASSUMPTIONS
USING THE GLOBAL TEST ON 4 DEGREES-OF-FREEDOM:
Level of Significance =  0.05 

Call:
 gvlma(x = fitM) 

                   Value p-value                   Decision
Global Stat        8.833 0.06542    Assumptions acceptable.
Skewness           6.314 0.01198 Assumptions NOT satisfied!
Kurtosis           1.219 0.26949    Assumptions acceptable.
Link Function      1.076 0.29959    Assumptions acceptable.
Heteroscedasticity 0.223 0.63674    Assumptions acceptable.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># We can see that the data is positively skewed. We might need to transform the data </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-check-assumptions-2" class="slide level2">
<h2>Step 2: Check assumptions</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">gvlma</span>(fitY)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ X + M, data = Meddata)

Coefficients:
(Intercept)            X            M  
    17.3218      -0.1118       0.4238  


ASSESSMENT OF THE LINEAR MODEL ASSUMPTIONS
USING THE GLOBAL TEST ON 4 DEGREES-OF-FREEDOM:
Level of Significance =  0.05 

Call:
 gvlma(x = fitY) 

                     Value p-value                Decision
Global Stat        3.41844  0.4904 Assumptions acceptable.
Skewness           1.85648  0.1730 Assumptions acceptable.
Kurtosis           0.77788  0.3778 Assumptions acceptable.
Link Function      0.71512  0.3977 Assumptions acceptable.
Heteroscedasticity 0.06896  0.7929 Assumptions acceptable.</code></pre>
</div>
</div>
</section>
<section id="step-3.1-run-the-mediation-analysis-on-the-models" class="slide level2">
<h2>Step 3.1: Run the mediation analysis on the models</h2>
<p>The mediate function gives us:<br>
- Average Causal Mediation Effects (ACME) - Average Direct Effects (ADE) - combined indirect and direct effects (Total Effect) - the ratio of these estimates (Prop. Mediated).</p>
<p>The ACME here is the indirect effect of M (total effect - direct effect) and thus this value tells us if our mediation effect is significant.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>fitMed <span class="ot">&lt;-</span> <span class="fu">mediate</span>(fitM, fitY, <span class="at">treat=</span><span class="st">"X"</span>, <span class="at">mediator=</span><span class="st">"M"</span>)</span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">summary</span>(fitMed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Causal Mediation Analysis 

Quasi-Bayesian Confidence Intervals

               Estimate 95% CI Lower 95% CI Upper p-value    
ACME            0.28159      0.14991         0.42  &lt;2e-16 ***
ADE            -0.11100     -0.30382         0.09   0.260    
Total Effect    0.17059      0.00862         0.33   0.038 *  
Prop. Mediated  1.62837      0.55308         9.84   0.038 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Sample Size Used: 100 


Simulations: 1000 </code></pre>
</div>
</div>
</section>
<section id="step-3.2-plot-the-mediation-analysis-of-the-models" class="slide level2">
<h2>Step 3.2: Plot the mediation analysis of the models</h2>
<p>The plot below reiterates what was on the previous slide:</p>
<ul>
<li>The confidence intervals of Total Effect and ACME are significant</li>
<li>The confidence interval of ADE is not significant</li>
</ul>
<blockquote>
<p><strong>Translation:</strong> - Total effect is signficant: there is a relationship between X and Y (direct and indirect) - ADE is not significant: the relationship between X and Y is not direct - ACME is significant: the relationship between X and Y is mediated by M</p>
</blockquote>

<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-30-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="step-4-bootstrap-the-mediation-model" class="slide level2">
<h2>Step 4: Bootstrap the mediation model</h2>
<p>The plot below changes our interpretation slightly:</p>
<ul>
<li>The confidence interval ACME is significant</li>
<li>The confidence interval of Total Effect and ADE are not significant</li>
</ul>
<blockquote>
<p><strong>Translation:</strong> - Total effect is not signficant: the relationship between X and Y is not significant when we combine direct and indirect effects - ADE is not significant: the relationship between X and Y is not direct - ACME is significant: the relationship between X and Y is mediated by M</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>fitMedBoot <span class="ot">&lt;-</span> <span class="fu">mediate</span>(fitM, fitY, <span class="at">boot=</span><span class="cn">TRUE</span>, <span class="at">sims=</span><span class="dv">999</span>, <span class="at">treat=</span><span class="st">"X"</span>, <span class="at">mediator=</span><span class="st">"M"</span>)</span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="fu">summary</span>(fitMedBoot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Causal Mediation Analysis 

Nonparametric Bootstrap Confidence Intervals with the Percentile Method

               Estimate 95% CI Lower 95% CI Upper p-value    
ACME             0.2808       0.1409         0.42  &lt;2e-16 ***
ADE             -0.1118      -0.3080         0.12    0.31    
Total Effect     0.1690      -0.0123         0.34    0.07 .  
Prop. Mediated   1.6615      -3.7235        11.33    0.07 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Sample Size Used: 100 


Simulations: 999 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">plot</span>(fitMedBoot) <span class="do">##</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="moderation_mediation_files/figure-revealjs/unnamed-chunk-31-1.png" width="960" class="r-stretch quarto-figure-center"></section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li>What are mediation and moderation?</li>
<li>Mediation analysis example</li>
<li>Packages needed</li>
<li>Baron and Kenny approach in R</li>
<li>Mediation package approach in R</li>
</ul>
</section>
<section id="references" class="slide level2">
<h2>References</h2>
<p>Demos &amp; Salas (2019). <em>A Language, not a Letter: Learning Statistics in R</em> (Chapter 14). https://ademos.people.uic.edu/ Accessed Jan 2020.</p>
<p>Pardo, A., &amp; Román, M. (2013). Reflections on the Baron and Kenny model of statistical mediation. Anales de psicologia, 29(2), 614-623.</p>
<p>Pena, E. A., &amp; Slate, E. H. (2006). Global validation of linear model assumptions. Journal of the American Statistical Association, 101(473), 341-354.</p>
<p>Preacher, K. J., &amp; Hayes, A. F. (2004). SPSS and SAS procedures for estimating indirect effects in simple mediation models. Behavior research methods, instruments, &amp; computers, 36(4), 717-731.</p>
<p>Zivot, E. (2021). Introduction to Computational Finance and Financial Econometrics with R. Retrieved 11 November 2022, from https://bookdown.org/compfinezbook/introcompfinr/</p>
</section>
<section id="questions-1" class="slide level2">
<h2>Questions?</h2>
<iframe src="https://wall.sli.do/event/u3jTwQP6TdcYodD7qZBEnD" height="100%" width="100%" frameborder="0" style="min-height: 560px;" title="Slido">
</iframe>
</section>
<section id="submit-your-attendance-1" class="slide level2">
<h2>Submit your attendance</h2>
<h3 id="attendance-code-5910-1">Attendance code: 5910</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/attendanceQR.png" width="400"></p>
</figure>
</div>
</div>
</div>
<h3 id="httpbit.lyaprm22-1"><a href="http://bit.ly/APRM22" class="uri">http://bit.ly/APRM22</a></h3>
<p><img src="logo.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="moderation_mediation_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="moderation_mediation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="moderation_mediation_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="moderation_mediation_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,

        height: 1080,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>